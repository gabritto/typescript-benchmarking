steps:
  - checkout: self
    path: typescript-benchmarking
    fetchTags: false
    fetchDepth: 1
    clean: true
    retryCountOnTaskFailure: 3

  # TODO(jakebailey): install correct version of pnpm
  - bash: |
      set -eo pipefail
      cd $(Pipeline.Workspace)/typescript-benchmarking
      npx pnpm install
      echo "##vso[task.setvariable variable=BENCH_SCRIPTS]$(Pipeline.Workspace)/typescript-benchmarking/scripts"
    displayName: Install typescript-benchmarking
    retryCountOnTaskFailure: 3
